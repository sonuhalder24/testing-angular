<!-- Write necessary code-->
<app-header></app-header>
<div class="main-view">
  <div class="home-content-wrapper">
    <div class="home-profile-wrapper">
      <div class="profile-details">
        <img [src]="userImg" width="120" height="100" class="profile-img" />
      </div>
    </div>
    <div class="home-profile-wrapper border">
      <!-- hide profile details if editing the form-->
      <ul id="profileDetails" class="profile-details" *ngIf="!editProfile">
        <li class="list-items">
          Name:
          <span id="usernameVal">
            {{ userDetails.username }}
          </span>
        </li>
        <li class="list-items">
          Mobile:
          <span id="mobileVal">
            {{ userDetails.mobile }}
          </span>
        </li>
        <li class="list-items">
          Email:
          <span id="emailVal" class="list-items">
            {{ userDetails.email }}
          </span>
        </li>
        <li class="list-items">
          Location:
          <span id="locationVal" class="list-items">
            {{ userDetails.location }}
          </span>
        </li>
      </ul>

      <!-- show edit profile form if edit profile button clicked-->
      <form
        id="editProfileForm"
        class="ro-form profile-form"
        *ngIf="editProfile"
        [formGroup]="editProfileForm"
        (ngSubmit)="changeMyProfile()"
      >
        <h2>Edit your profile</h2>
        <div class="form-group">
          <label for="username"> Name </label>
          <input
            type="text"
            id="consumerName"
            value="{{ userDetails.username }}"
            placeholder="Name"
            disabled
          />
        </div>
        <div class="form-group">
          <label for="mobile"> Contact number </label>
          <input
            type="text"
            formControlName="mobile"
            id="mobile"
            placeholder="mobile number"
          />
          <div
            class="form-error-messages"
            *ngIf="editProfileForm.get('mobile')?.touched &&( editProfileForm.get('mobile')?.errors?.['required'] || editProfileForm.get('mobile')?.errors?.['pattern'])"
          >
            {{ mobileErrMsg }}
          </div>
        </div>
        <div class="form-group">
          <label for="email"> Email </label>
          <input
            type="email"
            formControlName="email"
            id="email"
            placeholder="Email"
          />
          <div
            class="form-error-messages"
            *ngIf="editProfileForm.get('email')?.touched && (editProfileForm.get('email')?.errors?.['required'] || editProfileForm.get('email')?.errors?.['email'])"
          >
            {{ emailErrMsg }}
          </div>
        </div>

        <div class="form-group">
          <label for="location"> Location </label>
          <input
            type="text"
            formControlName="location"
            id="location"
            placeholder="Location"
          />
          <div
            class="form-error-messages"
            *ngIf="editProfileForm.get('location')?.touched && editProfileForm.get('location')?.errors?.['required']"
          >
            {{ locationErrMsg }}
          </div>
        </div>

        <!-- disable button if form not valid -->
        <!-- call changeMyProfile method when clicking on this button-->
        <button
          class="btn"
          type="submit"
          id="editSubmitBtn"
          [disabled]="editProfileForm.invalid"
        >
          Make changes
        </button>
      </form>
      <div class="profile-edit-choice">
        <!-- show button if not editing the form-->
        <!-- call editMyProfile method when clicking on this button-->
        <button
          id="editProfileBtn"
          class="prompt-btn btn"
          *ngIf="!editProfile"
          (click)="editMyProfile()"
        >
          Edit profile
        </button>

        <!-- show button if editing the form-->
        <!-- call discardEdit method when clicking on this button-->
        <button
          id="editDiscardBtn"
          class="alert-btn btn"
          *ngIf="editProfile"
          (click)="discardEdit()"
        >
          Discard
        </button>
      </div>
    </div>
  </div>
</div>
